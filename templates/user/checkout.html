{% extends 'user/base.html' %}
{% load static %}
{% block title %}
    确认订单
{% endblock %}
{% block main %}
    <link type="text/css" rel="stylesheet" href="../css/checkout.css" />
    <script src="{% static 'user/js/area.js' %}"></script>


    <!--主体内容-->
    <div class="container" style="margin-top: 60px; ">
        <div class="row">
            <div class="col-sm-12">
                <h3 class="title">确认收货地址</h3>
                <p class="text-right"><a href="javascript:void(0);" data-toggle="modal"
                        data-target="#myModalAddress">添加地址</a></p>
                <ul class="list-address ">
                    {% for add in address_list %}
                        <li class="col-sm-3">
                            <h4>收货人：{{ add.receiver }}</h4>
                            <div style="padding-top: 5px">
                                <p>地址：{{ add.address }}</p>
                                <p>邮编：{{ add.postNumber }}</p>
                                <p>手机号：{{ add.receive_phone }}</p>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <!-- 商品页面的表格 -->
            <div class="col-sm-12" style="margin-top: 30px">
                <h3 class="title">确认商品信息</h3>
                {% for shop_name, order_item_list in order_list.items %}
                    <div>{{ shop_name }}</div>
                    <table class="table " style="margin-top: 10px">
                        <tbody>
                            <tr>
                                <th colspan="3">商品信息</th>
                                <th>金额（元）</th>
                                <th>优惠</th>
                                <th>小计（元）</th>
                            </tr>
                            {% for oi in order_item_list %}
                                <tr>
                                <td class="col-sm-1">
                                    <img style="width: 79px;height: 79px;" src="/static/{{ oi.image }}" alt="">
                                </td>
                                <td><br>{{ oi.product_name }}</td>
                                <td></td>
                                <td><br>{{ oi.product_price }}</td>
                                <td><br>无折扣</td>
                                <td><br>{{ oi.total_price }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endfor %}


            </div>

        </div>

        <div class="footer">
            共有<span style="color: #f71117 ">{{ order_number }}</span>笔订单，
            共有<span style="color: #f71117 ">{{ product_number }}</span>件商品，共计：<span style="color: #f71117;font-size: 24px">{{ total_price }}</span>元
            <form method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-success btn-lg" onclick="window.location.href='{% url 'user:place_order_success' %}'">确认付款</button>
            </form>

        </div>
    </div>


    <!-- 添加新地址 -->
    <div class="modal fade" id="myModalAddress" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">添加收货地址</h4>
                </div>
                <div class="modal-body" style="overflow: auto">
                    <form class="form-horizontal col-sm-10">
                        <div class="form-group">
                            <label for="input1" class="col-sm-3 control-label">姓名</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="input1" placeholder="收货人姓名">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="input2" class="col-sm-3 control-label">电话</label>
                            <div class="col-sm-9">
                                <input type="tel" class="form-control" id="input2" placeholder="电话">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">收货地址</label>
                            <div class="col-sm-9">
                                <select id="s_province" name="s_province"></select>
                                <select id="s_city" name="s_city"></select>
                                <select id="s_county" name="s_county" onchange="showArea()"></select>
                                <script class="resources library" src="js/area.js" type="text/javascript"></script>
                                <script type="text/javascript">
                                    _init_area();
                                </script>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="input3" class="col-sm-3 control-label">详细地址</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="input3" placeholder="详细地址">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary">确认添加</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

